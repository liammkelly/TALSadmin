(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{51:function(e,t,a){e.exports=a(92)},56:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(11),c=a.n(s),r=(a(56),a(14)),u=a(10),i=a(23),o=a(9),d="ADD_CLASS_SUCCESS",E="ADD_CLASS_FAILURE",m="DELETE_EVENT_SUCCESS",h="DELETE_EVENT_FAILURE",v="SCHEDULE_EVENT_SUCCESS",f="SCHEDULE_EVENT_FAILURE",S="LOAD_CLASSES_SUCCESS",p="LOAD_CLASSES_START",b="LOAD_CLASSES_FAILURE",_="LOAD_EVENTS_SUCCESS",C="LOAD_EVENTS_START",y="LOAD_EVENTS_FAILURE",A="API";function O(){return T({url:"/classes/all",onSuccess:L,onFailure:j,label:p})}var D=function(e){return T({url:"/admin/event/add",data:e,method:"POST",onSuccess:function(){O()},onFailure:k,label:"SCHEDULE_EVENT_START"})};function T(e){var t=e.url,a=void 0===t?"":t,n=e.method,l=void 0===n?"GET":n,s=e.data,c=void 0===s?null:s,r=e.accessToken,u=void 0===r?null:r,i=e.onSuccess,o=void 0===i?function(){}:i,d=e.onFailure,E=void 0===d?function(){}:d,m=e.label,h=void 0===m?"":m,v=e.headersOverride;return{type:A,payload:{url:a,method:l,data:c,accessToken:u,onSuccess:o,onFailure:E,label:h,headersOverride:void 0===v?null:v}}}function L(e){return{type:S,payload:e}}function j(e){return{type:b,payload:e}}function g(e){return{type:_,payload:e}}function F(e){return{type:y,payload:e}}function N(e){return{type:h,error:e}}function R(){return{type:m}}function U(e){return{type:E,error:e}}function k(e){return{type:f,error:e}}var V={addNewClass:function(e){return T({url:"/admin/class/add",data:e,method:"POST",onSuccess:function(){O()},onFailure:U,label:"ADD_CLASS_START"})}},w=Object(o.b)(null,V)((function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),s=a[0],c=a[1];return l.a.createElement("div",{className:"admin-form"},l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.addNewClass({title:s}),c("")}},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"title"},"Class Name"),l.a.createElement("input",{type:"text",id:"title",value:s,onChange:function(e){return c(e.target.value)}})),l.a.createElement("button",{type:"submit"},"SAVE")))})),I=a(18),P=a(41),H=a(42),Y=(a(62),a(43));a(63),a(64);I.b.add(P.a,H.a);var x={deleteClassEvent:function(e){return T({url:"/event/delete/".concat(e),method:"POST",onSuccess:R,onFailure:N,label:"DELETE_EVENT_START"})},loadEvents:function(){return T({url:"/class/events/all",onSuccess:g,onFailure:F,label:C})}},B=Object(o.b)((function(e){return{classEvents:e.classEvents}}),x)((function(e){var t=Object(n.useState)(0),a=Object(i.a)(t,2);a[0],a[1];Object(n.useEffect)((function(){e.loadEvents()}),[]);var s=function(t){t.preventDefault();var a=t.target.dataset.id;Object(Y.confirmAlert)({title:"Confirm",message:"Are you sure you want to delete this scheduled class?",buttons:[{label:"Yes",onClick:function(){e.deleteClassEvent(a)}},{label:"Cancel",onClick:function(){}}],closeOnClickOutside:!0})};return l.a.createElement("ul",null,e.classEvents.map((function(e){return l.a.createElement("li",null,e.title," @ ",e.start," [ ",l.a.createElement("a",{href:"",key:e.class_event_id,"data-id":e.class_event_id,onClick:s},"delete")," ] ")})))})),M=a(22),G=a(44),J=a(45),q=a(49),z=a(46),K=a(13),Q=a(50),W=a(47),X=a.n(W),Z=a(21),$=a.n(Z);var ee=function(e){function t(e){var a;return Object(G.a)(this,t),(a=Object(q.a)(this,Object(z.a)(t).call(this,e))).state={class_id:"",event_date:""},a.handleChange=a.handleChange.bind(Object(K.a)(a)),a.handleDatetimeChange=a.handleDatetimeChange.bind(Object(K.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(K.a)(a)),a}return Object(Q.a)(t,e),Object(J.a)(t,[{key:"componentDidMount",value:function(){this.props.loadClasses(),this.setState({class_id:"",duration:"",event_date:""})}},{key:"handleChange",value:function(e){this.setState(Object(M.a)({},e.target.id,e.target.value))}},{key:"handleDatetimeChange",value:function(e){this.setState({event_date:e.toDate()})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,a=t.class_id,n=t.duration,l=t.event_date,s=$()(l).format("YYYY-MM-DD HH:mm");this.props.scheduleEvent({class_id:a,duration:n,datetime:s}),this.setState({class_id:"",duration:"",event_date:""})}},{key:"render",value:function(){return l.a.createElement("div",{className:"admin-form"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"class_id"},"Class"),l.a.createElement("select",{id:"class_id",value:this.state.class_id,onChange:this.handleChange},l.a.createElement("option",null,"Select a class"),this.props.classes.map((function(e){return l.a.createElement("option",{value:e.class_id},e.name)})))),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"event_date"},"Date and time"),l.a.createElement(X.a,{id:"event_date",value:this.state.event_date,onChange:this.handleDatetimeChange})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"class_id"},"Duration"),l.a.createElement("select",{id:"duration",value:this.state.duration,onChange:this.handleChange},l.a.createElement("option",null,"---"),l.a.createElement("option",{value:"60"},"60 minutes"),l.a.createElement("option",{value:"90"},"90 minutes"),l.a.createElement("option",{value:"120"},"120 minutes"))),l.a.createElement("button",{type:"submit"},"SAVE")))}}]),t}(n.Component),te=Object(o.b)((function(e){return{classes:e.classes}}),(function(e){return{scheduleEvent:function(t){return e(D(t))},loadClasses:function(){return e(O())}}}))(ee),ae=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"nav"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(r.b,{to:"add-class"},"Add a class")),l.a.createElement("li",null,l.a.createElement(r.b,{to:"schedule-class"},"Schedule a class")),l.a.createElement("li",null,l.a.createElement(r.b,{to:"view-classes"},"View classes")))),l.a.createElement(u.c,null,l.a.createElement(u.a,{path:"/add-class",component:w}),l.a.createElement(u.a,{path:"/schedule-class",component:te}),l.a.createElement(u.a,{path:"/view-classes",component:B})),l.a.createElement("div",{style:{width:"100%",textAlign:"center"}},l.a.createElement("hr",null),"[ ",l.a.createElement("a",{href:"/"},"exit admin")," ]"))},ne=a(17),le=function(e,t){switch(console.info(t.type,t),t.type){case y:return Object.assign({},e,{classes:e.classEvents=[]});case _:return Object.assign({},e,{classEvents:t.payload});case b:return Object.assign({},e,{classes:e.classes=[]});case S:return Object.assign({},e,{classes:t.payload});case d:case E:case f:case v:default:return e}},se=a(19),ce=a.n(se),re=function(e){var t=e.dispatch;return function(e){return function(a){if(e(a),a.type===A){var n=a.payload,l=n.url,s=n.method,c=n.data,r=n.accessToken,u=n.onSuccess,i=n.onFailure,o=n.label,d=n.headers,E=["GET","DELETE"].includes(s)?"params":"data";ce.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"/admin"}).REACT_APP_BASE_URL||"",ce.a.defaults.headers.common["Content-Type"]="application/json",ce.a.defaults.headers.common.Authorization="Bearer ".concat(r),o&&t(function(e){return{type:"API_START",payload:e}}(o)),ce.a.request(Object(M.a)({url:l,method:s,headers:d},E,c)).then((function(e){var a=e.data;t(u(a))})).catch((function(e){t(function(e){return{type:"API_ERROR",error:e}}(e)),t(i(e)),e.response&&403===e.response.status&&t(function(e){return{type:"ACCESS_DENIED",payload:{url:e}}}(window.location.pathname))})).finally((function(){o&&t(function(e){return{type:"API_END",payload:e}}(o))}))}}}},ue=Object(ne.c)(le,{classes:[],classEvents:[]},Object(ne.a)(re));c.a.render(l.a.createElement(o.a,{store:ue},l.a.createElement(r.a,{basename:"/admin"},l.a.createElement(ae,null))),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.5719b942.chunk.js.map